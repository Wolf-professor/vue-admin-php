{"remainingRequest":"/Users/quan/code/vue-admin-php/view/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/quan/code/vue-admin-php/view/src/components/common/FileResource.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/quan/code/vue-admin-php/view/src/components/common/FileResource.vue","mtime":1648609501788},{"path":"/Users/quan/code/vue-admin-php/view/node_modules/babel-loader/lib/index.js","mtime":1648609858414},{"path":"/Users/quan/code/vue-admin-php/view/node_modules/cache-loader/dist/cjs.js","mtime":1614678925383},{"path":"/Users/quan/code/vue-admin-php/view/node_modules/vue-loader/lib/index.js","mtime":1648609878333}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { fileResourceList, fileResourceAdd } from \"../../api/file/fileResource\";\nimport {\n    fileResourceTagList,\n    fileResourceTagAdd\n} from \"../../api/file/fileResourceTag\";\nimport { renderSize } from \"../../filtres/index\";\nexport default {\n    name: \"file-resource\",\n    data() {\n        return {\n            uploadVisible: false,\n            isIcon: true, // 是否以图标形式展示（列表 or 图标）\n            total: 0,\n            lists: [],\n            tagLists: [],\n            uploadData: {\n                type: 0, // 0 表示图片类型\n                tagId: \"\",\n                uploadName: \"file\",\n                token: \"\",\n                exts: \"jpg,png,gif\",\n                size: 0\n            },\n            query: {\n                type: 0, // 0 表示图片类型\n                tagId: \"\",\n                size: 15,\n                page: 0\n            },\n            selectList: []\n        };\n    },\n    props: {\n        uploadUrl: String, // 上传的地址\n        uploadName: String, // 上传的文件key名称\n        token: String, // 上传的授权码\n        isAll: false, // 是否可多选\n        size: Number, // 允许上传的文件大小\n        fileExt: String, // 允许上传的文件后缀\n        limit: Number // 每页显示多少\n    },\n    mounted() {},\n    methods: {\n        // 刷新\n        refresh() {\n            this.getList();\n            this.getTagList();\n        },\n        // 新建分组\n        addTag() {\n            this.$prompt(\"请输入分组名称\", \"提示\", {\n                confirmButtonText: \"确定\",\n                cancelButtonText: \"取消\"\n            })\n                .then(({ value }) => {\n                    let data = {\n                        tag: value\n                    };\n                    fileResourceTagAdd(data)\n                        .then(response => {\n                            if (response.code) {\n                                this.$message({\n                                    message: response.message,\n                                    type: \"error\"\n                                });\n                                return;\n                            }\n                            this.tagLists.push(response.data);\n                        })\n                        .catch(() => {});\n                })\n                .catch(() => {\n                    // 取消\n                });\n        },\n        // 点击某个分组\n        tagClick(item) {\n            let tagId = \"\";\n            if (item && item.id) {\n                tagId = item.id;\n            }\n            this.query.tagId = tagId;\n            this.uploadData.tagId = tagId;\n            this.getList();\n        },\n        /**\n         * 选择某个文件\n         * @param row\n         */\n        selectFile(row, index) {\n            if (row.edit) {\n                return false;\n            }\n            // 选择单个文件，并且文件后缀\n            let exts = this.uploadData.exts.split(\",\");\n            if (exts.indexOf(row.ext) < 0) {\n                // 不在允许后缀中\n                this.$message.error(\n                    \"文件只能为 \" + this.uploadData.exts + \"格式!\"\n                );\n                return;\n            }\n            row.select = !row.select;\n            // 如果不为全选模式\n            if (!this.isAll) {\n                this.selectList = [row];\n                this.resourceSelect();\n                return;\n            }\n            this.lists.splice(index, 1, row);\n        },\n        allOK() {\n            this.selectList = [];\n            if (this.lists.length > 0) {\n                let lists = this.lists;\n                let exts = this.uploadData.exts.split(\",\");\n                for (let i in lists) {\n                    let item = lists[i];\n                    if (item.select && item.select === true) {\n                        // 如果在扩展列表中\n                        if (\n                            item.ext &&\n                            exts.length > 0 &&\n                            exts.indexOf(item.ext) !== -1\n                        ) {\n                            this.selectList.push(item);\n                        }\n                    }\n                }\n            }\n            this.resourceSelect();\n        },\n        // 获取文件列表\n        getList() {\n            fileResourceList(this.query)\n                .then(response => {\n                    this.lists = response.data || [];\n                    this.total = response.total || 0;\n                })\n                .catch(() => {});\n        },\n        // 获取分组列表\n        getTagList() {\n            fileResourceTagList(this.query)\n                .then(response => {\n                    this.tagLists = response || [];\n                })\n                .catch(() => {});\n        },\n        // 对外的选择文件后的方法\n        resourceSelect() {\n            this.$emit(\"resourceSelect\", this.selectList);\n        },\n        submitUpload() {\n            this.$refs.upload.submit();\n        },\n        /**\n         * 分页的点击\n         * @param val\n         */\n        handleCurrentChange(val) {\n            this.query.page = val;\n            this.getList();\n        },\n        handleSuccess(response, file, fileList) {\n            if (response.code) {\n                this.$message({\n                    message: response.message,\n                    type: \"error\"\n                });\n                return;\n            }\n            for (let i = 0; i < fileList.length; i++) {\n                let tempFile = fileList[i];\n                if (file.uid === tempFile.uid) {\n                    fileList.splice(i, 1);\n                }\n            }\n            if (fileList.length <= 0) {\n                // 上传完成\n                this.uploadVisible = false;\n            }\n            let data = response;\n            data.tag_id = this.uploadData.tagId;\n            data.type = this.uploadData.type;\n            data.size = this.uploadData.size;\n            let fileName = file.name;\n            data.filename = fileName;\n            data.size = file.size;\n            let extIndex = fileName.lastIndexOf(\".\") + 1;\n            data.ext = fileName.substr(extIndex, fileName.length);\n            fileResourceAdd(data)\n                .then(response => {\n                    if (response.code) {\n                        this.$message({\n                            message: response.message,\n                            type: \"error\"\n                        });\n                        return;\n                    }\n                    this.lists.unshift(response.data);\n                })\n                .catch(() => {});\n        },\n        handleError(err, file, fileList) {\n            this.$message({\n                message: err.message,\n                type: \"error\"\n            });\n            for (let i = 0; i < fileList.length; i++) {\n                let tempFile = fileList[i];\n                if (file.uid === tempFile.uid) {\n                    fileList.splice(i, 1);\n                }\n            }\n        },\n        // 选择文件时\n        beforeChange(file, fileList) {\n            let name = file.name ? file.name : \"\";\n            let ext = name\n                ? name.substr(name.lastIndexOf(\".\") + 1, name.length)\n                : true;\n            let isExt = this.uploadData.exts.indexOf(ext) < 0;\n            if (isExt) {\n                this.$message.error(\n                    \"文件只能为 \" + this.uploadData.exts + \" 格式!\"\n                );\n            }\n            let isSize =\n                this.uploadData.size > 0 && file.size > this.uploadData.size;\n            let sizeStr = this.uploadData.size;\n            if (isSize) {\n                this.$message.error(\n                    \"上传文件不能超过 \" + renderSize(sizeStr) + \"!\"\n                );\n            }\n            if (isExt || isSize) {\n                for (let i = 0; i < fileList.length; i++) {\n                    let tempFile = fileList[i];\n                    if (file.uid === tempFile.uid) {\n                        fileList.splice(i, 1);\n                    }\n                }\n            }\n            return false;\n        }\n    },\n    created() {\n        // 获取列表\n        this.getList();\n        // 获取分组列表\n        this.getTagList();\n        if (this.size) {\n            this.uploadData.size = this.size;\n        }\n        if (this.limit) {\n            this.query.size = this.limit;\n        }\n        if (\n            this.fileExt &&\n            this.fileExt !== \"\" &&\n            this.fileExt !== \"undefined\"\n        ) {\n            this.uploadData.exts = this.fileExt;\n        }\n        if (\n            this.uploadName &&\n            this.uploadName !== \"\" &&\n            this.uploadName !== \"undefined\"\n        ) {\n            this.uploadData.uploadName = this.uploadName;\n        }\n        if (this.token && this.token !== \"\" && this.token !== \"undefined\") {\n            this.uploadData.token = this.token;\n        }\n    },\n    computed: {}\n};\n",{"version":3,"sources":["FileResource.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"FileResource.vue","sourceRoot":"src/components/common","sourcesContent":["<template>\n    <div style=\"padding: 10px;\">\n        <el-button-group>\n            <el-button type=\"primary\" size=\"small\" icon=\"el-icon-refresh\" @click=\"refresh\"></el-button>\n            <el-button type=\"primary\" size=\"small\" @click=\"isIcon = !isIcon\">{{ isIcon ? '列表' : '图标' }}</el-button>\n            <span></span>\n            <el-button size=\"small\" type=\"primary\" icon=\"el-icon-plus\" @click=\"addTag\">新建分组</el-button>\n            <el-popover\n                placement=\"top\"\n                title=\"上传\"\n                width=\"100%\"\n                v-model=\"uploadVisible\"\n                trigger=\"click\">\n                <el-upload\n                    style=\"max-width: 300px;overflow-x: hidden;\"\n                    class=\"upload-demo\"\n                    ref=\"upload\"\n                    :action=\"uploadUrl\"\n                    :on-success=\"handleSuccess\"\n                    :on-error=\"handleError\"\n                    :data=\"uploadData\"\n                    :name=\"uploadData.uploadName\"\n                    :accept=\"uploadData.exts\"\n                    :on-change=\"beforeChange\"\n                    :auto-upload=\"false\">\n                    <el-button slot=\"trigger\" size=\"small\" type=\"primary\" icon=\"el-icon-upload2\">选取文件</el-button>\n                    <el-button style=\"margin-left: 10px;\" size=\"small\" type=\"success\" @click=\"submitUpload\">上传到服务器\n                    </el-button>\n                    <div slot=\"tip\" class=\"el-upload__tip\">只能上传{{ uploadData.exts }}文件，且不超过{{ uploadData.size | renderSize }}</div>\n                </el-upload>\n                <el-button slot=\"reference\" size=\"small\" type=\"primary\" icon=\"el-icon-upload\">上传文件</el-button>\n            </el-popover>\n        </el-button-group>\n        <ul class=\"breadcrumb-list\">\n            <li>\n                <a v-if=\"query.tagId === ''\" href=\"javascript:;\" class=\"none-path\" title=\"全部分组\">全部分组</a>\n                <a v-else=\"\" href=\"javascript:;\" title=\"全部分组\" @click=\"tagClick('')\">全部分组</a>\n\n                <template v-for=\"item in tagLists\">\n                    <span :key=\"item.id\">\n                        <span class=\"shufenge\">|</span>\n                        <a v-if=\"query.tagId !== item.id\" href=\"javascript:;\"\n                           @click=\"tagClick(item)\">{{ item.tag }}</a>\n                        <a v-else=\"\" href=\"javascript:;\" class=\"none-path\" :title=\"item.tag\">{{ item.tag }}</a>\n                    </span>\n                </template>\n            </li>\n        </ul>\n\n        <div v-if=\"isIcon\" class=\"icon-lists\">\n            <template v-for=\"(item, index) in lists\">\n                <a href=\"#\" :key=\"item.id\" class=\"item\" :class=\"item.select ? 'select' : ''\" :style=\"item.edit ? 'width: 150px;' : ''\" @click=\"selectFile(item, index)\">\n                    <div class=\"app-icon fileicon-small-pic\">\n                        <img :src=\"item.url\"/>\n                    </div>\n                    <span class=\"title\">\n                        <span>\n                            {{ item.filename }}\n                        </span>\n                    </span>\n                    <span v-if=\"isAll\" class=\"circle-check\">\n                        <span class=\"el-icon-circle-check\"></span>\n                    </span>\n                    <!--大图-->\n                    <span class=\"big-img\">\n                        <img :src=\"item.url\"/>\n                    </span>\n                </a>\n            </template>\n            <template  v-if=\"lists.length <= 0\">\n                <div class=\"icon-list-empty\">\n                    暂无数据\n                </div>\n            </template>\n        </div>\n\n\n        <el-table\n            v-else=\"\"\n            ref=\"uploadTable\"\n            highlight-current-row\n            :data=\"lists\"\n            style=\"width: 100%; height: 100%;\">\n            <el-table-column\n                v-if=\"isAll\"\n                width=\"55\">\n                <template slot-scope=\"scope\">\n                    <el-checkbox v-model=\"scope.row.select\" @click=\"selectFile(scope.row, scope.$index)\"></el-checkbox>\n                </template>\n            </el-table-column>\n            <el-table-column\n                prop=\"filename\"\n                label=\"文件名\">\n                <template slot-scope=\"scope\">\n                    <a class=\"file-type-icon fileicon-small-pic\"\n                       :href=\"scope.row.url\"\n                       title=\"点击查看\"\n                       target=\"_blank\"></a>\n                    <span class=\"filename\"\n                          :title=\"scope.row.filename\"\n                          @click=\"selectFile(scope.row, scope.$index)\">{{ scope.row.filename }}</span>\n                </template>\n            </el-table-column>\n            <el-table-column\n                label=\"大小\"\n                width=\"130\">\n                <template slot-scope=\"scope\">\n                    <span v-if=\"!scope.row.size || scope.row.size == 0\">-</span>\n                    <span v-else=\"\">{{ scope.row.size | renderSize}}</span>\n                </template>\n            </el-table-column>\n            <el-table-column\n                label=\"修改日期\"\n                width=\"180\">\n                <template slot-scope=\"scope\">\n                    <span v-if=\"scope.row.create_time\">{{ scope.row.create_time | parseTime('{y}-{m}-{d} {h}:{i}') }}</span>\n                    <span v-else=\"\">-</span>\n                </template>\n            </el-table-column>\n        </el-table>\n\n        <el-pagination\n            :page-size=\"query.size\"\n            @current-change=\"handleCurrentChange\"\n            layout=\"prev, pager, next\"\n            :total=\"total\">\n        </el-pagination>\n\n        <div style=\"margin-top: 20px\">\n            <el-button @click=\"allOK()\" type=\"primary\">确认选择</el-button>\n        </div>\n\n    </div>\n</template>\n\n<!--上传资源-->\n<script>\nimport { fileResourceList, fileResourceAdd } from \"../../api/file/fileResource\";\nimport {\n    fileResourceTagList,\n    fileResourceTagAdd\n} from \"../../api/file/fileResourceTag\";\nimport { renderSize } from \"../../filtres/index\";\nexport default {\n    name: \"file-resource\",\n    data() {\n        return {\n            uploadVisible: false,\n            isIcon: true, // 是否以图标形式展示（列表 or 图标）\n            total: 0,\n            lists: [],\n            tagLists: [],\n            uploadData: {\n                type: 0, // 0 表示图片类型\n                tagId: \"\",\n                uploadName: \"file\",\n                token: \"\",\n                exts: \"jpg,png,gif\",\n                size: 0\n            },\n            query: {\n                type: 0, // 0 表示图片类型\n                tagId: \"\",\n                size: 15,\n                page: 0\n            },\n            selectList: []\n        };\n    },\n    props: {\n        uploadUrl: String, // 上传的地址\n        uploadName: String, // 上传的文件key名称\n        token: String, // 上传的授权码\n        isAll: false, // 是否可多选\n        size: Number, // 允许上传的文件大小\n        fileExt: String, // 允许上传的文件后缀\n        limit: Number // 每页显示多少\n    },\n    mounted() {},\n    methods: {\n        // 刷新\n        refresh() {\n            this.getList();\n            this.getTagList();\n        },\n        // 新建分组\n        addTag() {\n            this.$prompt(\"请输入分组名称\", \"提示\", {\n                confirmButtonText: \"确定\",\n                cancelButtonText: \"取消\"\n            })\n                .then(({ value }) => {\n                    let data = {\n                        tag: value\n                    };\n                    fileResourceTagAdd(data)\n                        .then(response => {\n                            if (response.code) {\n                                this.$message({\n                                    message: response.message,\n                                    type: \"error\"\n                                });\n                                return;\n                            }\n                            this.tagLists.push(response.data);\n                        })\n                        .catch(() => {});\n                })\n                .catch(() => {\n                    // 取消\n                });\n        },\n        // 点击某个分组\n        tagClick(item) {\n            let tagId = \"\";\n            if (item && item.id) {\n                tagId = item.id;\n            }\n            this.query.tagId = tagId;\n            this.uploadData.tagId = tagId;\n            this.getList();\n        },\n        /**\n         * 选择某个文件\n         * @param row\n         */\n        selectFile(row, index) {\n            if (row.edit) {\n                return false;\n            }\n            // 选择单个文件，并且文件后缀\n            let exts = this.uploadData.exts.split(\",\");\n            if (exts.indexOf(row.ext) < 0) {\n                // 不在允许后缀中\n                this.$message.error(\n                    \"文件只能为 \" + this.uploadData.exts + \"格式!\"\n                );\n                return;\n            }\n            row.select = !row.select;\n            // 如果不为全选模式\n            if (!this.isAll) {\n                this.selectList = [row];\n                this.resourceSelect();\n                return;\n            }\n            this.lists.splice(index, 1, row);\n        },\n        allOK() {\n            this.selectList = [];\n            if (this.lists.length > 0) {\n                let lists = this.lists;\n                let exts = this.uploadData.exts.split(\",\");\n                for (let i in lists) {\n                    let item = lists[i];\n                    if (item.select && item.select === true) {\n                        // 如果在扩展列表中\n                        if (\n                            item.ext &&\n                            exts.length > 0 &&\n                            exts.indexOf(item.ext) !== -1\n                        ) {\n                            this.selectList.push(item);\n                        }\n                    }\n                }\n            }\n            this.resourceSelect();\n        },\n        // 获取文件列表\n        getList() {\n            fileResourceList(this.query)\n                .then(response => {\n                    this.lists = response.data || [];\n                    this.total = response.total || 0;\n                })\n                .catch(() => {});\n        },\n        // 获取分组列表\n        getTagList() {\n            fileResourceTagList(this.query)\n                .then(response => {\n                    this.tagLists = response || [];\n                })\n                .catch(() => {});\n        },\n        // 对外的选择文件后的方法\n        resourceSelect() {\n            this.$emit(\"resourceSelect\", this.selectList);\n        },\n        submitUpload() {\n            this.$refs.upload.submit();\n        },\n        /**\n         * 分页的点击\n         * @param val\n         */\n        handleCurrentChange(val) {\n            this.query.page = val;\n            this.getList();\n        },\n        handleSuccess(response, file, fileList) {\n            if (response.code) {\n                this.$message({\n                    message: response.message,\n                    type: \"error\"\n                });\n                return;\n            }\n            for (let i = 0; i < fileList.length; i++) {\n                let tempFile = fileList[i];\n                if (file.uid === tempFile.uid) {\n                    fileList.splice(i, 1);\n                }\n            }\n            if (fileList.length <= 0) {\n                // 上传完成\n                this.uploadVisible = false;\n            }\n            let data = response;\n            data.tag_id = this.uploadData.tagId;\n            data.type = this.uploadData.type;\n            data.size = this.uploadData.size;\n            let fileName = file.name;\n            data.filename = fileName;\n            data.size = file.size;\n            let extIndex = fileName.lastIndexOf(\".\") + 1;\n            data.ext = fileName.substr(extIndex, fileName.length);\n            fileResourceAdd(data)\n                .then(response => {\n                    if (response.code) {\n                        this.$message({\n                            message: response.message,\n                            type: \"error\"\n                        });\n                        return;\n                    }\n                    this.lists.unshift(response.data);\n                })\n                .catch(() => {});\n        },\n        handleError(err, file, fileList) {\n            this.$message({\n                message: err.message,\n                type: \"error\"\n            });\n            for (let i = 0; i < fileList.length; i++) {\n                let tempFile = fileList[i];\n                if (file.uid === tempFile.uid) {\n                    fileList.splice(i, 1);\n                }\n            }\n        },\n        // 选择文件时\n        beforeChange(file, fileList) {\n            let name = file.name ? file.name : \"\";\n            let ext = name\n                ? name.substr(name.lastIndexOf(\".\") + 1, name.length)\n                : true;\n            let isExt = this.uploadData.exts.indexOf(ext) < 0;\n            if (isExt) {\n                this.$message.error(\n                    \"文件只能为 \" + this.uploadData.exts + \" 格式!\"\n                );\n            }\n            let isSize =\n                this.uploadData.size > 0 && file.size > this.uploadData.size;\n            let sizeStr = this.uploadData.size;\n            if (isSize) {\n                this.$message.error(\n                    \"上传文件不能超过 \" + renderSize(sizeStr) + \"!\"\n                );\n            }\n            if (isExt || isSize) {\n                for (let i = 0; i < fileList.length; i++) {\n                    let tempFile = fileList[i];\n                    if (file.uid === tempFile.uid) {\n                        fileList.splice(i, 1);\n                    }\n                }\n            }\n            return false;\n        }\n    },\n    created() {\n        // 获取列表\n        this.getList();\n        // 获取分组列表\n        this.getTagList();\n        if (this.size) {\n            this.uploadData.size = this.size;\n        }\n        if (this.limit) {\n            this.query.size = this.limit;\n        }\n        if (\n            this.fileExt &&\n            this.fileExt !== \"\" &&\n            this.fileExt !== \"undefined\"\n        ) {\n            this.uploadData.exts = this.fileExt;\n        }\n        if (\n            this.uploadName &&\n            this.uploadName !== \"\" &&\n            this.uploadName !== \"undefined\"\n        ) {\n            this.uploadData.uploadName = this.uploadName;\n        }\n        if (this.token && this.token !== \"\" && this.token !== \"undefined\") {\n            this.uploadData.token = this.token;\n        }\n    },\n    computed: {}\n};\n</script>\n\n<style type=\"text/scss\" lang=\"scss\">\n.edit-input {\n    margin-left: 10px;\n    width: 200px;\n}\n.new-dir-bth {\n    position: absolute;\n    right: 15px;\n    top: 10px;\n}\n.breadcrumb-list {\n    padding-left: 5px;\n    background: #fff;\n    height: 16px;\n    line-height: 16px;\n    overflow: hidden;\n    white-space: nowrap;\n    margin-top: 10px;\n    li {\n        float: left;\n        list-style: none;\n        margin: 0;\n        padding: 0;\n    }\n    a {\n        color: #4287ed;\n        text-decoration: none;\n        outline: 0;\n        display: inline-block;\n        max-width: 105px;\n        white-space: nowrap;\n        text-overflow: ellipsis;\n        overflow: hidden;\n        float: left;\n        &:hover {\n            text-decoration: underline;\n        }\n    }\n    .none-path {\n        color: #666666;\n        display: inline-block;\n        max-width: 200px;\n        white-space: nowrap;\n        text-overflow: ellipsis;\n        overflow: hidden;\n    }\n    .shufenge {\n        float: left;\n        padding: 0 3px;\n        color: #c5d8f3;\n    }\n}\n.filename {\n    cursor: pointer;\n    float: left;\n    margin-left: 10px;\n    max-width: 80%;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n    overflow: hidden;\n    line-height: 26px;\n    color: #666666;\n    &:hover {\n        text-decoration: none;\n        color: #3b8cff;\n    }\n    &:active {\n        text-decoration: none;\n        color: #3b8cff;\n    }\n}\n.file-type-icon {\n    float: left;\n    height: 26px;\n    width: 26px;\n    background-image: url(\"../../assets/image/file_type_icon.png\");\n    &.fileicon-small-pic {\n        background-position: -596px -306px;\n    }\n}\n\n/*icon图片列表展示*/\n@import \"../../styles/mixin\";\n.icon-lists {\n    @include size(100%, 100%);\n    margin-bottom: 10px;\n    display: flex;\n    flex-direction: row;\n    flex-wrap: wrap;\n    & .icon-list-empty {\n        text-align: center;\n        width: 100%;\n        height: 60px;\n        line-height: 60px;\n        color: #909399;\n        border: 1px solid #cccccc;\n        border-left: none;\n        border-right: none;\n        margin-bottom: 10px;\n        margin-top: 10px;\n        opacity: 0.5;\n    }\n    & .item {\n        @include f_left;\n        background-color: #fff;\n        text-align: center;\n        width: 100px;\n        height: 120px;\n        float: left;\n        margin: 4px 0 0 6px;\n        border: 1px solid #fff;\n        position: relative;\n        border-radius: 4px;\n        &:hover {\n            background-color: #f1f5fa;\n        }\n        & .app-icon {\n            border-radius: 0.154rem;\n            position: relative;\n            margin: auto 0;\n            width: 100%;\n            height: 100%;\n            line-height: 120px;\n            overflow: hidden;\n            background-color: #f5f5f5;\n            &.fileicon-small-pic {\n                img {\n                    /*如果是图片则展示图片*/\n                    max-width: 100%;\n                    max-height: 100%;\n                    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAAAAAByaaZbAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JQAAgIMAAPn/AACA6QAAdTAAAOpgAAA6mAAAF2+SX8VGAAAAAmJLR0QA/4ePzL8AAAAJcEhZcwAACxMAAAsTAQCanBgAAAAHdElNRQfiBR0RGx0qH34fAAAAP0lEQVRIx2P8zwABD6C0AgE+EwOJYFQDMYDlAZShAKUJ8QehH4aDBsbR/DAoNIzmh8GhYTQ/DA4No/lhcGgAANgjFQHywHtPAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE4LTA1LTI5VDE2OjU5OjE4KzA4OjAwfq61WQAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxOC0wNS0yOVQxNzoyNzoyOSswODowMM1v/QcAAAAASUVORK5CYII=);\n                    background-size: 24px;\n                    transition: all 0.2s;\n                    vertical-align: middle;\n                }\n            }\n        }\n        & .title {\n            position: absolute;\n            bottom: 2px;\n            left: 0;\n            display: block;\n            /*截断多出来的字*/\n            @include text-overflow;\n            font-size: 12px;\n            color: #4a4a4a;\n            text-align: center;\n            margin: auto 0;\n            width: 100%;\n            & .edit-input {\n                padding: 0 0 0 5px;\n                height: 24px;\n                vertical-align: middle;\n                border: 1px solid rgba(58, 140, 255, 0.3);\n                background: #fff;\n                border-radius: 2px;\n                width: 78px;\n                margin: 0;\n            }\n            & .edit-btn {\n                width: 20px;\n                height: 20px;\n                display: inline-block;\n                vertical-align: middle;\n                cursor: pointer;\n                position: relative;\n                margin: 0 0 0 4px;\n                border: 1px solid rgba(58, 140, 255, 0.3);\n                border-radius: 2px;\n                line-height: 20px;\n                color: #3b8cff;\n                font-size: 16px;\n                font-weight: 600;\n            }\n        }\n        & .circle-check {\n            display: none;\n            position: absolute;\n            top: 5px;\n            left: 5px;\n            height: 21px;\n            width: 21px;\n            cursor: pointer;\n            font-size: 18px;\n            color: #b5d3ff;\n        }\n        &:hover .circle-check {\n            display: block;\n        }\n        &.select {\n            background-color: #f1f5fa;\n        }\n        &.select .circle-check {\n            color: #3b8cff;\n            display: block;\n        }\n        &:hover .big-img {\n            display: block;\n        }\n        & .big-img {\n            animation: bounce-in 0.5s;\n            position: absolute;\n            right: -40px;\n            top: 100px;\n            width: 200px;\n            height: 200px;\n            display: none;\n            z-index: 99;\n            & img {\n                max-width: 100%;\n                max-height: 100%;\n            }\n        }\n    }\n}\n@keyframes bounce-in {\n    0% {\n        opacity: 0;\n    }\n    20% {\n        opacity: 0;\n    }\n    100% {\n        opacity: 1;\n    }\n}\n</style>\n"]}]}