{"remainingRequest":"/Users/quan/code/vue-admin-php/view/node_modules/thread-loader/dist/cjs.js!/Users/quan/code/vue-admin-php/view/node_modules/babel-loader/lib/index.js!/Users/quan/code/vue-admin-php/view/node_modules/eslint-loader/index.js??ref--13-0!/Users/quan/code/vue-admin-php/view/src/utils/axios.js","dependencies":[{"path":"/Users/quan/code/vue-admin-php/view/src/utils/axios.js","mtime":1648609501796},{"path":"/Users/quan/code/vue-admin-php/view/babel.config.js","mtime":1648609501757},{"path":"/Users/quan/code/vue-admin-php/view/node_modules/cache-loader/dist/cjs.js","mtime":1614678925383},{"path":"/Users/quan/code/vue-admin-php/view/node_modules/thread-loader/dist/cjs.js","mtime":1614678926780},{"path":"/Users/quan/code/vue-admin-php/view/node_modules/babel-loader/lib/index.js","mtime":1648609858414},{"path":"/Users/quan/code/vue-admin-php/view/node_modules/eslint-loader/index.js","mtime":1614678921459}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport _defineProperty from \"/Users/quan/code/vue-admin-php/view/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport axios from \"axios\";\nimport { Message } from \"element-ui\";\nimport store from \"../store/index\";\nimport { BASE_URL } from \"../config/app\";\nimport router from \"../router/index\"; // 创建axios实例\n\nvar service = axios.create({\n  baseURL: BASE_URL,\n  // api的base_url\n  timeout: 5000 // 请求超时时间\n\n}); // request拦截器\n\nservice.interceptors.request.use(function (config) {\n  // Do something before request is sent\n  if (store.getters.adminId && store.getters.token) {\n    config.params = _objectSpread({\n      ADMIN_ID: store.getters.adminId,\n      ADMIN_TOKEN: store.getters.token\n    }, config.params);\n  }\n\n  return config;\n}, function (error) {\n  // Do something with request error\n  Promise.reject(error);\n}); // respone拦截器\n\nservice.interceptors.response.use(function (response) {\n  var data = response.data;\n\n  if (data.code) {\n    if (data.code === 2) {\n      store.dispatch(\"fedLogout\").then(function () {\n        Message.error(\"验证失败,请重新登录\");\n        router.push({\n          path: \"/login\",\n          query: {\n            redirect: router.currentRoute.fullPath\n          } // 从哪个页面跳转过来\n\n        });\n      });\n    }\n  }\n\n  return data;\n}, function (error) {\n  Message({\n    message: error.message,\n    type: \"error\",\n    duration: 5 * 1000\n  });\n  return Promise.reject(error);\n});\nexport default service;",{"version":3,"sources":["/Users/quan/code/vue-admin-php/view/src/utils/axios.js"],"names":["axios","Message","store","BASE_URL","router","service","create","baseURL","timeout","interceptors","request","use","config","getters","adminId","token","params","ADMIN_ID","ADMIN_TOKEN","error","Promise","reject","response","data","code","dispatch","then","push","path","query","redirect","currentRoute","fullPath","message","type","duration"],"mappings":";;;;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,OAAT,QAAwB,YAAxB;AACA,OAAOC,KAAP;AACA,SAASC,QAAT;AACA,OAAOC,MAAP,wB,CAEA;;AACA,IAAMC,OAAO,GAAGL,KAAK,CAACM,MAAN,CAAa;AACzBC,EAAAA,OAAO,EAAEJ,QADgB;AACN;AACnBK,EAAAA,OAAO,EAAE,IAFgB,CAEX;;AAFW,CAAb,CAAhB,C,CAKA;;AACAH,OAAO,CAACI,YAAR,CAAqBC,OAArB,CAA6BC,GAA7B,CACI,UAAAC,MAAM,EAAI;AACN;AACA,MAAIV,KAAK,CAACW,OAAN,CAAcC,OAAd,IAAyBZ,KAAK,CAACW,OAAN,CAAcE,KAA3C,EAAkD;AAC9CH,IAAAA,MAAM,CAACI,MAAP;AACIC,MAAAA,QAAQ,EAAEf,KAAK,CAACW,OAAN,CAAcC,OAD5B;AAEII,MAAAA,WAAW,EAAEhB,KAAK,CAACW,OAAN,CAAcE;AAF/B,OAGOH,MAAM,CAACI,MAHd;AAKH;;AACD,SAAOJ,MAAP;AACH,CAXL,EAYI,UAAAO,KAAK,EAAI;AACL;AACAC,EAAAA,OAAO,CAACC,MAAR,CAAeF,KAAf;AACH,CAfL,E,CAkBA;;AACAd,OAAO,CAACI,YAAR,CAAqBa,QAArB,CAA8BX,GAA9B,CACI,UAAAW,QAAQ,EAAI;AACR,MAAMC,IAAI,GAAGD,QAAQ,CAACC,IAAtB;;AACA,MAAIA,IAAI,CAACC,IAAT,EAAe;AACX,QAAID,IAAI,CAACC,IAAL,KAAc,CAAlB,EAAqB;AACjBtB,MAAAA,KAAK,CAACuB,QAAN,CAAe,WAAf,EAA4BC,IAA5B,CAAiC,YAAM;AACnCzB,QAAAA,OAAO,CAACkB,KAAR,CAAc,YAAd;AACAf,QAAAA,MAAM,CAACuB,IAAP,CAAY;AACRC,UAAAA,IAAI,EAAE,QADE;AAERC,UAAAA,KAAK,EAAE;AAAEC,YAAAA,QAAQ,EAAE1B,MAAM,CAAC2B,YAAP,CAAoBC;AAAhC,WAFC,CAE0C;;AAF1C,SAAZ;AAIH,OAND;AAOH;AACJ;;AACD,SAAOT,IAAP;AACH,CAfL,EAgBI,UAAAJ,KAAK,EAAI;AACLlB,EAAAA,OAAO,CAAC;AACJgC,IAAAA,OAAO,EAAEd,KAAK,CAACc,OADX;AAEJC,IAAAA,IAAI,EAAE,OAFF;AAGJC,IAAAA,QAAQ,EAAE,IAAI;AAHV,GAAD,CAAP;AAKA,SAAOf,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACH,CAvBL;AA0BA,eAAed,OAAf","sourcesContent":["import axios from \"axios\";\nimport { Message } from \"element-ui\";\nimport store from \"../store/index\";\nimport { BASE_URL } from \"../config/app\";\nimport router from \"../router/index\";\n\n// 创建axios实例\nconst service = axios.create({\n    baseURL: BASE_URL, // api的base_url\n    timeout: 5000 // 请求超时时间\n});\n\n// request拦截器\nservice.interceptors.request.use(\n    config => {\n        // Do something before request is sent\n        if (store.getters.adminId && store.getters.token) {\n            config.params = {\n                ADMIN_ID: store.getters.adminId,\n                ADMIN_TOKEN: store.getters.token,\n                ...config.params\n            };\n        }\n        return config;\n    },\n    error => {\n        // Do something with request error\n        Promise.reject(error);\n    }\n);\n\n// respone拦截器\nservice.interceptors.response.use(\n    response => {\n        const data = response.data;\n        if (data.code) {\n            if (data.code === 2) {\n                store.dispatch(\"fedLogout\").then(() => {\n                    Message.error(\"验证失败,请重新登录\");\n                    router.push({\n                        path: \"/login\",\n                        query: { redirect: router.currentRoute.fullPath } // 从哪个页面跳转过来\n                    });\n                });\n            }\n        }\n        return data;\n    },\n    error => {\n        Message({\n            message: error.message,\n            type: \"error\",\n            duration: 5 * 1000\n        });\n        return Promise.reject(error);\n    }\n);\n\nexport default service;\n"]}]}